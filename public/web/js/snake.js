(()=>{"use strict";var t={458:(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{constructor(t,s,i,e,h,o){this._ctx=t,this.posX=s,this.posY=i,this._sprite=e,this._gridSize=h,this._unitLength=o}draw(){this._ctx.drawImage(this._sprite,this.posX*this._unitLength,this.posY*this._unitLength,this._unitLength,this._unitLength)}updatePosition(){this.posX=Math.floor(Math.random()*this._gridSize),this.posY=Math.floor(Math.random()*this._gridSize)}}},950:function(t,s){var i=this&&this.__awaiter||function(t,s,i,e){return new(i||(i=Promise))((function(h,o){function n(t){try{_(e.next(t))}catch(t){o(t)}}function a(t){try{_(e.throw(t))}catch(t){o(t)}}function _(t){var s;t.done?h(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(n,a)}_((e=e.apply(t,s||[])).next())}))};Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{constructor(t,s,i,e,h){this._ctx=t,this._snake=s,this._food=i,this._gridSize=e,this._length=h}start(){this._ctx.fillStyle="#fff",this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._loadAssets().then((()=>{window.addEventListener("keydown",this._handleKeyDown.bind(this)),requestAnimationFrame((t=>{this.previousTimeStamp=t,requestAnimationFrame(this._gameLoop.bind(this))}))}))}_gameLoop(t){t-this.previousTimeStamp>80&&(this._draw(),this.previousTimeStamp=t),requestAnimationFrame(this._gameLoop.bind(this))}_draw(){this._ctx.fillStyle="#fff",this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._food.draw(),this._snake.draw(),this._snake.isHeadAtPos(this._food.posX,this._food.posY)&&(this._snake.grow(),this._food.updatePosition()),this._ctx.fillStyle="#000";for(let t=1;t<this._gridSize;t++){const s=t*this._length-1;this._ctx.fillRect(s,0,1,this._ctx.canvas.height),this._ctx.fillRect(0,s,this._ctx.canvas.width,1)}}_handleKeyDown(t){switch(t.key.toLowerCase()){case"w":this._snake.setDirection(0,-1);break;case"a":this._snake.setDirection(-1,0);break;case"s":this._snake.setDirection(0,1);break;case"d":this._snake.setDirection(1,0)}}_loadAssets(){return i(this,void 0,void 0,(function*(){}))}}},237:function(t,s,i){var e,h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});const o=h(i(950)),n=h(i(491)),a=h(i(458)),_=document.createElement("canvas");null===(e=document.getElementById("canvas-container"))||void 0===e||e.appendChild(_),_.width=540,_.height=540;const r=_.getContext("2d",{alpha:!1});if(!r)throw new Error("2d context is not supported by browser");(function(t){const s=new Image;return new Promise(((i,e)=>{s.onload=()=>{i(s)},s.onerror=()=>{e(`Could not load image [${t}]`)},s.src=t}))})("/images/apple.png").then((t=>{const s=new n.default(r,18,30),i=new a.default(r,10,10,t,18,30);new o.default(r,s,i,18,30).start()}))},491:(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{constructor(t,s,i){this._ctx=t,this._gridSize=s,this._unitLength=i,this.isDead=!1,this._dx=1,this._dy=0,this._posX=[5,4,3],this._posY=[10,10,10]}draw(){this.isDead||(this.isDead=this._hasCollided()),this.isDead||(this._posX.unshift(this._posX[0]+this._dx),this._posY.unshift(this._posY[0]+this._dy),this._posX.pop(),this._posY.pop()),this._ctx.fillStyle=this.isDead?"#880000":"#008800";for(let t=0;t<this.size;t++)this._ctx.fillRect(this._posX[t]*this._unitLength,this._posY[t]*this._unitLength,this._unitLength,this._unitLength)}setDirection(t,s){0!==this._dx&&0===t?(this._dx=0,this._dy=s):0!==this._dy&&0===s&&(this._dx=t,this._dy=0)}grow(){this._posX.push(2*this._posX[this.size-1]-this._posX[this.size-2]),this._posY.push(2*this._posY[this.size-1]-this._posY[this.size-2])}_hasCollided(){for(let t=1;t<this.size;t++)if(this._posX[0]===this._posX[t]&&this._posY[0]===this._posY[t])return!0;return this._posX[0]<0||this._posX[0]>=this._gridSize||this._posY[0]<0||this._posY[0]>=this._gridSize}get size(){return this._posX.length}isHeadAtPos(t,s){return this._posX[0]===t&&this._posY[0]===s}}}},s={};!function i(e){var h=s[e];if(void 0!==h)return h.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}(237)})();